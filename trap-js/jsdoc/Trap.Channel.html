<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: Channel</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Class: Channel</h1>
    
    



<section>
    
<header>
    <h2>
    Channel
    </h2>
    
        <div class="class-description">A channel is a logical stream of Trap messages, multiplexed on the
           same Trap connection. Essentially, this allows sending multiple
           streams over the same connection. This is useful when multiple
           forms of data may need to be transported over a Trap session (e.g.
           short and long messages mixed), where a long/large message should
           not hold up a short/small message.
           <p>
           In the default case, there are two channels on every TrapEndpoint.
           Channel ID 0 will consist of control traffic, ensuring the
           endpoint is alive, managing transports, etc. It will have the
           highest priority, ensuring the endpoint can manage itself. Channel
           ID 1 will consist of application data. It will yield to Channel ID
           0, ensuring that the application sending large messages will not
           cause control traffic to time out.
           <p>
           Trap version 1.2 supports up to 256 different channels. It is not
           recommended that Channel ID 0 is used for application data,
           leaving 255 channels for the application to use. Each channel can
           have its features individually configured.
           <p>
           When instantiated, channels have certain default settings. Trap's
           default implementation will use a chunk size of 16KB, and limit to
           128KB in-flight bytes per channel. The channels will not operate
           in streaming mode by default. The default priority will be 0,
           except for Channel ID 0 which has the maximum priority.
           <p>
           The in-flight window will limit the throughput on fast links,
           while preventing us from oversaturating slow links. As an example,
           assuming 100ms latency and 128kb window size, we will at most
           process 10 windows per second, or 1280kb/s. 10ms latency yields
           12800kb/s. Increasing the window size on a faster link will yield
           more throughput, but may risk oversaturating a slower link.</div>
    
</header>  

<article>
    <div class="container-overview">
    
    
    
        
<dt>
    <h4 class="name" id="Channel"><span class="type-signature"></span>new Channel<span class="signature">(endpoint, channelID)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <b>Never instantiate a channel manually</b>. Trap will manage the channels.
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>endpoint</code></td>
            
            
            <td class="type">
            
                
<span class="param-type"><a href="Trap.Endpoint.html">Trap.Endpoint</a></span>


            
            </td>
            
            
            
            
            
            <td class="description last">The endpoint that spawned this channel.</td>
        </tr>
	
	
	
        <tr>
            
                <td class="name"><code>channelID</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>
            
            
            
            
            
            <td class="description last">The channel ID being created</td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
<dl class="details">
    
        
        <h5 class="subsection-title">Properties:</h5>
        
        <dl>

<table class="props">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>streamingEnabled</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>
            
            
            
            
            
            <td class="description last">Controls the <i>streaming</i> flag of
          the channel. When a channel works in streaming mode, it will
          dispatch trapData events as data is received, although always in
          the correct order. With streaming mode disabled, each trapData
          event will represent a single send() event on the other side.
          <p>
          Streaming mode is useful for when Trap is used to transfer larger
          chunks of data, whose framing is internal to the data transferred.
          For example, an image, a song, or a video stream. Streaming mode
          will reduce – but not eliminate – the amount of buffering done in
          Trap.</td>
        </tr>
	
	
	
        <tr>
            
                <td class="name"><code>chunkSize</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">Integer</span>


            
            </td>
            
            
            
            
            
            <td class="description last">The maximum number of bytes allowed in each
          message. Note that the chunk size includes the Trap message header,
          and this will be automatically subtracted from <i>numBytes</i>,
          unless numBytes is in the range of [1, TRAP_HEADER_SIZE]. If
          numBytes is zero or negative, chunking will be disabled.
          <p>
          Note that a chunkSize of Integer.MAX_VALUE will disable chunking. A
          channel will have that value set if the remote endpoint is
          suspected of not supporting chunking. Excepting that, chunkSize
          will automatically be reduced to the trap config option
          <code>TrapEndpoint#OPTION_MAX_CHUNK_SIZE</code>, which is automatically
          negotiated between the peers.</td>
        </tr>
	
	
	
        <tr>
            
                <td class="name"><code>maxInFlightBytes</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">Integer</span>


            
            </td>
            
            
            
            
            
            <td class="description last">The maximum number of in-flight bytes.
          Combined with the chunk size, this limits the number of messages
          that the channel will allow to be in transit at any given time.
          <p>
          Increasing the number of in flight bytes will increase the required
          buffer sizes on both the local and remote ends, as well as the
          system's network buffers. It may also increase throughput,
          especially on congested links or when using multiple transports.
          <p>
          Note that in-flight bytes differs from the queue size. The queue
          denotes how many messages/bytes this channel can buffer, while
          in-flight bytes denotes how many messages/bytes we allow on the
          network.</td>
        </tr>
	
	
	
        <tr>
            
                <td class="name"><code>priority</code></td>
            
            
            <td class="type">
            
                
<span class="param-type">Integer</span>


            
            </td>
            
            
            
            
            
            <td class="description last">The channel priority, relative to the other
          channels. Channel ID 0 has priority <code>Integer#MAX_VALUE</code>,
          meaning any traffic on 0 takes precedence of any other traffic, for
          any reason.
          <p>
          Priority is byte based. A channel with priority <i>n</i> will be
          allowed to send up to <i>n</i> bytes before ceding transmission
          rights to a transport with lower priority. Note that if
          <i>chunkSize</i> exceeds priority, the transport will nevertheless
          be allowed to send <i>chunkSize</i> number of bytes.
          <p>
          Priority only affects the scheduling order of messages, and not the
          throughput. For the exact buffering, one must consider the
          channel's in-flight limit, the endpoint's in-flight limit (if any),
          as well as the transports' in-flight limit.</td>
        </tr>
	
	
	</tbody>
</table></dl>
        
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="channel.js.html">impl/channel.js</a>, <a href="channel.js.html#line95">line 95</a>
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    

    

    
    
    
    
    
    
    
</dd>

    
    </div>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
</article>

</section>  




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="Trap.Channel.html">Channel</a></li><li><a href="Trap.ClientEndpoint.html">ClientEndpoint</a></li><li><a href="Trap.Endpoint.html">Endpoint</a></li><li><a href="Trap.ListenerEndpoint.html">ListenerEndpoint</a></li></ul><h3>Namespaces</h3><ul><li><a href="Trap.Constants.html">Constants</a></li><li><a href="Trap.Endpoint.Queue.html">Queue</a></li><li><a href="Trap.Endpoint.State.html">State</a></li><li><a href="Trap.Transports.html">Transports</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.3-dev</a> on Tue Nov 25 2014 20:17:59 GMT-0800 (PST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>