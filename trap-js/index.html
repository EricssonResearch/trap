<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2014-11-17
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20141117" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Transport Abstraction Package - Trap - </title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>TrAP JavaScript</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2014-11-17</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 1.3.0-SNAPSHOT</li>
                          <li class="divider">|</li>             <li class="">
                    <a href="../index.html" title="Trap">
        Trap</a>
        </li>
      <li class="divider ">/</li>
                <li class="">
                    <a href="./" title="Transport Abstraction Package - Trap">
        Transport Abstraction Package - Trap</a>
        </li>
      <li class="divider ">/</li>
        <li class=""></li>
                
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Trap 1.3.0-SNAPSHOT</li>
                                
      <li>
    
                          <a href="../index.html" title="Introduction">
          <i class="none"></i>
        Introduction</a>
            </li>
                  
      <li>
    
                          <a href="../trap-api/quickstart.html" title="Java Quickstart">
          <i class="none"></i>
        Java Quickstart</a>
            </li>
                  
      <li>
    
                          <a href="../trap-js/index.html" title="JavaScript Quickstart">
          <i class="none"></i>
        JavaScript Quickstart</a>
            </li>
                  
      <li>
    
                          <a href="../channels.html" title="Channels">
          <i class="none"></i>
        Channels</a>
            </li>
                  
      <li>
    
                          <a href="../configuration.html" title="Configuration">
          <i class="none"></i>
        Configuration</a>
            </li>
                              <li class="nav-header">Language Specific Documentation</li>
                                
      <li>
    
                          <a href="../trap-api/index.html" title="Java">
          <i class="none"></i>
        Java</a>
            </li>
                  
      <li>
    
                          <a href="../trap-js/index.html" title="JavaScript">
          <i class="none"></i>
        JavaScript</a>
            </li>
                              <li class="nav-header">Trap JavaScript API</li>
                                
      <li class="active">
    
            <a href="#"><i class="none"></i>Quickstart</a>
          </li>
                  
      <li>
    
                          <a href="model.html" title="API Model">
          <i class="none"></i>
        API Model</a>
            </li>
                  
      <li>
    
                          <a href="jsdoc/index.html" title="JSDoc">
          <i class="none"></i>
        JSDoc</a>
            </li>
                                        <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                                                                        
      <li>
    
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-down"></i>
        Project Information</a>
                    <ul class="nav nav-list">
                      
      <li class="active">
    
            <a href="#"><i class="none"></i>About</a>
          </li>
                      
      <li>
    
                          <a href="plugin-management.html" title="Plugin Management">
          <i class="none"></i>
        Plugin Management</a>
            </li>
                      
      <li>
    
                          <a href="distribution-management.html" title="Distribution Management">
          <i class="none"></i>
        Distribution Management</a>
            </li>
                      
      <li>
    
                          <a href="dependency-info.html" title="Dependency Information">
          <i class="none"></i>
        Dependency Information</a>
            </li>
                      
      <li>
    
                          <a href="dependency-convergence.html" title="Dependency Convergence">
          <i class="none"></i>
        Dependency Convergence</a>
            </li>
                      
      <li>
    
                          <a href="source-repository.html" title="Source Repository">
          <i class="none"></i>
        Source Repository</a>
            </li>
                      
      <li>
    
                          <a href="mail-lists.html" title="Mailing Lists">
          <i class="none"></i>
        Mailing Lists</a>
            </li>
                      
      <li>
    
                          <a href="issue-tracking.html" title="Issue Tracking">
          <i class="none"></i>
        Issue Tracking</a>
            </li>
                      
      <li>
    
                          <a href="integration.html" title="Continuous Integration">
          <i class="none"></i>
        Continuous Integration</a>
            </li>
                      
      <li>
    
                          <a href="plugins.html" title="Project Plugins">
          <i class="none"></i>
        Project Plugins</a>
            </li>
                      
      <li>
    
                          <a href="license.html" title="Project License">
          <i class="none"></i>
        Project License</a>
            </li>
                      
      <li>
    
                          <a href="dependency-management.html" title="Dependency Management">
          <i class="none"></i>
        Dependency Management</a>
            </li>
                      
      <li>
    
                          <a href="team-list.html" title="Project Team">
          <i class="none"></i>
        Project Team</a>
            </li>
                      
      <li>
    
                          <a href="project-summary.html" title="Project Summary">
          <i class="none"></i>
        Project Summary</a>
            </li>
                      
      <li>
    
                          <a href="dependencies.html" title="Dependencies">
          <i class="none"></i>
        Dependencies</a>
            </li>
              </ul>
        </li>
                                                                                      
      <li>
    
                          <a href="project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                            <form id="search-form" action="http://www.google.com/search" method="get" >
    
  <input value="ericssonresearch.github.io/trap/trap-js/" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=search-form"></script>
          
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Trap JavaScript</h1>
<p>The JavaScript library provides a fully-fledged stack for JS execution environments. It supports all major browsers and also node.js. </p>
<h1>Installation</h1>
<p>The JS library comes pre-built with a debug and minified version. You can download them here:</p>

<ul>
  
<li><a class="externalLink" href="https://repo1.maven.org/maven2/com/ericsson/research/trap/trap-js/">https://repo1.maven.org/maven2/com/ericsson/research/trap/trap-js/</a></li>
</ul>
<p>Once downloaded, add it as a script tag</p>

<div class="source">
<pre>&lt;script src=&quot;trap.js&quot;&gt;&lt;/script&gt;
</pre></div>
<h1>Usage</h1>
<p>Once loaded, Trap puts everything under the Trap namespace and can be instantiated from there. Creating a client will automatically connect it, so make sure to set the handlers properly.</p>

<div class="source">
<pre>client = new Trap.ClientEndpoint(&quot;http://trapserver.com:8888&quot;);
client.onopen = function() {
    console.log(&quot;I am now open!&quot;);
}

client.onmessage = function(evt) {
    console.log(&quot;Received from server: &quot; + evt.string);
}
</pre></div>
<p>You can send messages any time after <i>onopen</i> has been called, including inside the onopen call itself.</p>

<div class="source">
<pre>client.onopen = function() {
    client.send(&quot;Hello, server&quot;);
}
</pre></div>
<div class="section">
<h2>Sending Different Datatypes<a name="Sending_Different_Datatypes"></a></h2>
<p>Trap supports three basic data types natively: ArrayBuffers, Objects and Strings. You can send any of them natively.</p>

<div class="source">
<pre>client.send(myArrayBuffer);

client.send({foo: &quot;bar&quot;});

client.send(&quot;foobar&quot;);
</pre></div></div>
<div class="section">
<h2>Receiving Different Datatypes<a name="Receiving_Different_Datatypes"></a></h2>
<p>Likewise, the different types can be retrieved at any time. Suppose an incoming message contains the string <tt>{&quot;foo&quot;:&quot;bar&quot;}</tt>. We can read it out as follows:</p>

<div class="source">
<pre>client.onmessage = function(evt) {

    evt.bytes; // Returns an ArrayBuffer containing the bytes ['{', '&quot;', 'f', 'o', 'o', '&quot;', ':', '&quot;', 'b', 'a', 'r', '}']
    evt.string; // Returns the string '{&quot;foo&quot;:&quot;bar&quot;}'
    evt.object // Returns the object {foo:&quot;bar&quot;}

}
</pre></div>
<p>Not all of these parameters are applicable to all datatypes. For example, data sent as binary (image) will not translate well to a string. Likewise, if the string does not represent an object, it will not parse well into JSON. It is up to the developer to separate between the types. Data will not be attempted to be parsed until the appropriate field is read.</p></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2014
                        <a href="https://www.ericsson.com">Ericsson AB</a>.
            All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>