<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2014-11-25
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20141125" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Transport Abstraction Package - Trap - </title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>TrAP Parent</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2014-11-25</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 1.3</li>
                          <li class="divider">|</li>             <li class="">
                    <a href="index.html" title="Trap">
        Trap</a>
        </li>
      <li class="divider ">/</li>
        <li class=""></li>
                
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Trap 1.3</li>
                                
      <li class="active">
    
            <a href="#"><i class="none"></i>Introduction</a>
          </li>
                  
      <li>
    
                          <a href="trap-api/quickstart.html" title="Java Quickstart">
          <i class="none"></i>
        Java Quickstart</a>
            </li>
                  
      <li>
    
                          <a href="trap-js/index.html" title="JavaScript Quickstart">
          <i class="none"></i>
        JavaScript Quickstart</a>
            </li>
                  
      <li>
    
                          <a href="channels.html" title="Channels">
          <i class="none"></i>
        Channels</a>
            </li>
                  
      <li>
    
                          <a href="configuration.html" title="Configuration">
          <i class="none"></i>
        Configuration</a>
            </li>
                              <li class="nav-header">Language Specific Documentation</li>
                                
      <li>
    
                          <a href="trap-api/index.html" title="Java">
          <i class="none"></i>
        Java</a>
            </li>
                  
      <li>
    
                          <a href="trap-js/index.html" title="JavaScript">
          <i class="none"></i>
        JavaScript</a>
            </li>
                              <li class="nav-header">Modules</li>
                                
      <li>
    
                          <a href="trap-utils-api/index.html" title="TrAP Utils API">
          <i class="none"></i>
        TrAP Utils API</a>
            </li>
                  
      <li>
    
                          <a href="trap-utils-15/index.html" title="TrAP Utils JDK 1.5">
          <i class="none"></i>
        TrAP Utils JDK 1.5</a>
            </li>
                  
      <li>
    
                          <a href="trap-network/index.html" title="Trap Networking Layer">
          <i class="none"></i>
        Trap Networking Layer</a>
            </li>
                  
      <li>
    
                          <a href="trap-api/index.html" title="TrAP API">
          <i class="none"></i>
        TrAP API</a>
            </li>
                  
      <li>
    
                          <a href="trap-core/index.html" title="TrAP Core">
          <i class="none"></i>
        TrAP Core</a>
            </li>
                  
      <li>
    
                          <a href="trap-js/index.html" title="TrAP JavaScript">
          <i class="none"></i>
        TrAP JavaScript</a>
            </li>
                  
      <li>
    
                          <a href="transports/index.html" title="TrAP Transports">
          <i class="none"></i>
        TrAP Transports</a>
            </li>
                  
      <li>
    
                          <a href="trap-tests-parent/index.html" title="TrAP Packaging Parent">
          <i class="none"></i>
        TrAP Packaging Parent</a>
            </li>
                  
      <li>
    
                          <a href="package-parent/index.html" title="TrAP Packaging Parent">
          <i class="none"></i>
        TrAP Packaging Parent</a>
            </li>
                  
      <li>
    
                          <a href="trap-android/index.html" title="TrAP Android Library">
          <i class="none"></i>
        TrAP Android Library</a>
            </li>
                  
      <li>
    
                          <a href="trap-index-maven-plugin/index.html" title="Index Maven Plugin">
          <i class="none"></i>
        Index Maven Plugin</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                                                                                          
      <li>
    
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-down"></i>
        Project Information</a>
                    <ul class="nav nav-list">
                      
      <li class="active">
    
            <a href="#"><i class="none"></i>About</a>
          </li>
                      
      <li>
    
                          <a href="plugin-management.html" title="Plugin Management">
          <i class="none"></i>
        Plugin Management</a>
            </li>
                      
      <li>
    
                          <a href="distribution-management.html" title="Distribution Management">
          <i class="none"></i>
        Distribution Management</a>
            </li>
                      
      <li>
    
                          <a href="dependency-info.html" title="Dependency Information">
          <i class="none"></i>
        Dependency Information</a>
            </li>
                      
      <li>
    
                          <a href="dependency-convergence.html" title="Dependency Convergence">
          <i class="none"></i>
        Dependency Convergence</a>
            </li>
                      
      <li>
    
                          <a href="source-repository.html" title="Source Repository">
          <i class="none"></i>
        Source Repository</a>
            </li>
                      
      <li>
    
                          <a href="mail-lists.html" title="Mailing Lists">
          <i class="none"></i>
        Mailing Lists</a>
            </li>
                      
      <li>
    
                          <a href="issue-tracking.html" title="Issue Tracking">
          <i class="none"></i>
        Issue Tracking</a>
            </li>
                      
      <li>
    
                          <a href="integration.html" title="Continuous Integration">
          <i class="none"></i>
        Continuous Integration</a>
            </li>
                      
      <li>
    
                          <a href="plugins.html" title="Project Plugins">
          <i class="none"></i>
        Project Plugins</a>
            </li>
                      
      <li>
    
                          <a href="license.html" title="Project License">
          <i class="none"></i>
        Project License</a>
            </li>
                      
      <li>
    
                          <a href="modules.html" title="Project Modules">
          <i class="none"></i>
        Project Modules</a>
            </li>
                      
      <li>
    
                          <a href="dependency-management.html" title="Dependency Management">
          <i class="none"></i>
        Dependency Management</a>
            </li>
                      
      <li>
    
                          <a href="team-list.html" title="Project Team">
          <i class="none"></i>
        Project Team</a>
            </li>
                      
      <li>
    
                          <a href="project-summary.html" title="Project Summary">
          <i class="none"></i>
        Project Summary</a>
            </li>
                      
      <li>
    
                          <a href="dependencies.html" title="Dependencies">
          <i class="none"></i>
        Dependencies</a>
            </li>
              </ul>
        </li>
                                                                                                                          
      <li>
    
                          <a href="project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                            <form id="search-form" action="http://www.google.com/search" method="get" >
    
  <input value="ericssonresearch.github.io/trap/" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=search-form"></script>
          
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Transport Abstraction Package (trap)</h1>
<p>This library provides a socket-based interface that abstracts a set of underlying transports (socket, websocket, http, functioncall), while allowing reconnects, network connection changes, compression and multiplexing. Trap can utilise one or more underlying connections to improve performance, is a fully binary protocol, and is designed to handle failures.</p>
<h1>Features</h1>
<p>Trap provides</p>

<ul>
  
<li>Transport independent data transfer using a message paradigm.</li>
  
<li>Optional, reliable, in-order hop-to-hop transfer, regardless of underlying medium.</li>
  
<li>Connection re-establishment, when applicable. This recovers from a network connection change (e.g. wifi to cellular data)</li>
  
<li>Multiplexing of up to 255 application streams, at configurable priority levels that allow pre-emption of bulk data.</li>
  
<li>Support for Java and JavaScript clients and servers (node.js required for servers).</li>
</ul>
<p>As an abstraction, Trap applies the following overheads (measured in Java, as of 2014)</p>

<ul>
  
<li>16 bytes of protocol data per message (excluding transport overhead such as TCP/HTTP)</li>
  
<li>Approximately 50 kilobytes of RAM per connection (configurable usage for active connections)</li>
  
<li>A minimum of 200 kilobytes of RAM to load class files.</li>
  
<li>Two threads for network &amp; timing. Additional threads as required by the application.</li>
  
<li>About 500 kilobytes .jar file (if packaging all features, including slf4j which Trap depends on)</li>
</ul>
<h1>Installation</h1>
<p>The easiest way to add Trap for Java is to include the full archive in one step. The following code will include Trap as well as the four default, built-in transports. These transports are not suitable in all contexts, but can serve as an entry point. </p>

<div class="source">
<pre>    &lt;dependency&gt;
       &lt;groupId&gt;com.ericsson.research.trap.packaging&lt;/groupId&gt;
       &lt;artifactId&gt;trap-full&lt;/artifactId&gt;
       &lt;version&gt;1.3&lt;/version&gt;
    &lt;/dependency&gt;
</pre></div>
<p>The recommended way is to include the specific transports as needed. The full list of transports is available in the <a class="externalLink" href="https://github.com/EricssonResearch/trap/tree/master/trap-transports">main repo</a>. Some transports, such as HTTP, have multiple providers. It is recommended to use the best provider available (e.g. Servlet) when applicable.</p>
<h1>Getting Started</h1>
<p>For more detailed information, see the dedicated getting started guide for <a href="./trap-api/quickstart.html">Java</a> or <a href="./trap-js/index.html">JavaScript</a>, or check out the <a href="./apidocs/reference/com/ericsson/research/trap/examples/package-summary.html">Java examples</a>. The rest of this guide assumes Java for clients and servers.</p>
<div class="section">
<h2>Listening for incoming connections<a name="Listening_for_incoming_connections"></a></h2>
<p>After you have included the Trap dependency, you can create a listener, which is the equivalent to a server socket.</p>

<div class="source">
<pre>listener = TrapFactory.createListener(&quot;http://0.0.0.0:8888&quot;);
</pre></div>
<p>This will create and configure a listener with a fixed transport (http) to listen on any IP and port 8888. When the port is unspecified, Trap will automatically allocate available ports. The full list of ports can be accessed via <tt>listener.getClientConfiguration()</tt>.</p>
<p>The listener, while allocated, is not listening to the sockets yet. In order to start listening, you need to call</p>

<div class="source">
<pre>listener.listen(delegate);
</pre></div>
<p>where <i>delegate</i> is an object that implements at least the <a href="./apidocs/reference/com/ericsson/research/trap/delegates/OnAccept.html">OnAccept</a> interface from the <a href="./apidocs/reference/com/ericsson/research/trap/delegates/package-summary.html">Trap Delegate Interfaces</a>. This delegate will be called by the listener whenever a new Trap connection is established. </p>
<p>Whenever an incoming connection is received, the onAccept method will be called with a <i>TrapEndpoint</i> object. The following code exemplifies how this is handled:</p>

<div class="source">
<pre>void incomingTrapConnection(TrapEndpoint endpoint, TrapListener listener, Object context) {
    endpoint.setDelegate(myConnectionDelegate);
    myEndpointCollection.put(endpointKey, endpoint);
}
</pre></div></div>
<div class="section">
<h2>Connecting to a server<a name="Connecting_to_a_server"></a></h2>
<p>Connect to a listener using a TrapClient.</p>

<div class="source">
<pre>client = TrapFactory.createClient(&quot;http://127.0.0.1:8888&quot;);
client.setDelegate(myDelegate);
client.open();
</pre></div>
<p>This will create a client to connect using http to localhost, port 8888. The delegate should implement at least the <a href="./apidocs/reference/com/ericsson/research/trap/delegates/OnOpen.html">OnOpen</a> interface to be notified when the connection is open. The <i>trapOpen()</i> function will be called when the connection is established.</p></div>
<div class="section">
<h2>Sending data<a name="Sending_data"></a></h2>
<p>Sending data is as simple as calling TrapEndpoint.send().</p>
<h1>Links</h1>

<ul>
  
<li><a class="externalLink" href="https://ericssonresearch.github.io/trap">Home Page</a></li>
  
<li><a class="externalLink" href="https://github.com/ericssonresearch/trap">Source Code</a></li>
  
<li><a href="./trap-api/apidocs/index.html">Javadoc</a></li>
  
<li><a href="./trap-js/jsdoc/index.html">JSDoc</a></li>
</ul></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2014
                        <a href="https://www.ericsson.com">Ericsson AB</a>.
            All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>